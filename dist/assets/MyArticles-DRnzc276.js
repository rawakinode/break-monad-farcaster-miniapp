import{r as l,b,x as w,l as C,c as a,a as t,f as M,F as h,g as D,e as f,u as N,y as V,z as A,m as B,o,p as L,t as c,q as T,s as $}from"./index-Cv26Cw_D.js";const z={class:"book-view"},F={class:"content",style:{"margin-top":"3.6rem"}},R={class:"article-content"},S={class:"text-content"},q={class:"title title-max-line"},E={class:"description description-max-line"},I={class:"cover-container"},O=["src","alt"],j={class:"action-bar"},G={class:"date"},H={class:"tip-container"},J={class:"tip-count"},K={class:"total-tip"},P={key:0},Q={key:1,class:"loader2"},X={__name:"MyArticles",setup(U){const g=A(),d=l(!1),u=l(!1),_=l(0),m=l(5),n=l([]);b(async()=>{await p()});const y=()=>{g.push("/create")},p=async(r=!1)=>{var s;try{const i=await w.context.user;console.log(i),r&&(_.value=0,n.value=[]);const e=await C.get(`https://api.rawaki.xyz/article_by_fid?offset=${_.value}&limit=${m.value}&fid=${i.user.fid}`),v=((s=e==null?void 0:e.data)==null?void 0:s.data)||[];n.value=[...n.value,...v],v.length>0?(_.value+=m.value,v.length<=m.value&&(d.value=!0)):d.value=!0}catch{return null}},k=async()=>{u.value=!0,await p(!1),u.value=!1},x=r=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(r).toLocaleDateString("id-ID",s)};return(r,s)=>{const i=B("router-link");return o(),a(h,null,[t("div",z,[t("div",F,[s[1]||(s[1]=t("h3",{class:"subpage"},"My Articles",-1)),(o(!0),a(h,null,D(n.value,e=>(o(),a("div",{key:e.article_id,class:"article-card"},[t("div",R,[f(i,{to:{name:"article",params:{id:e.article_id}},class:"main-content-2 clickable-area"},{default:L(()=>[t("div",S,[t("h2",q,c(e.title),1),t("p",E,c(e.description),1)]),t("div",I,[t("img",{src:e.thumbnail,alt:e.title,class:"cover-image"},null,8,O)])]),_:2},1032,["to"]),t("div",j,[t("span",G,c(x(e.created_at_human)),1),t("div",H,[t("span",J,c(e.tip_count)+" Tip",1),t("div",K,[s[0]||(s[0]=t("img",{src:$,alt:"",height:"10px"},null,-1)),T(" "+c(e.tip_earned)+" MON",1)])])])])]))),128)),!d.value&&n.value.length>0?(o(),a("div",P,[u.value?(o(),a("div",Q)):(o(),a("button",{key:0,class:"load-more-button",onClick:k}," Load More "))])):M("",!0)])]),t("button",{class:"floating-edit-button",onClick:y,"aria-label":"Create"},[f(N(V))])],64)}}};export{X as default};
